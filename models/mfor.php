<?php
    class Mfor{

        private $idfor;
        private $tipfor;
        private $codfor;
        private $verfor;
        private $fecfor;
        private $nomsec1;
        private $pre1;
        private $pre2;
        private $pre3;
        private $pre4;
        private $pre5;
        private $nomsec2;
        private $pre6;
        private $pre7;
        private $pre8;
        private $pre9;
        private $pre10;
        private $nomsec3;
        private $pre11;
        private $pre12;
        private $pre13;
        private $pre14;
        private $pre15;
        private $nomsec4;
        private $pre16;
        private $pre17;
        private $pre18;
        private $pre19;
        private $pre20;
        private $nomsec5;
        private $pre21;
        private $pre22;
        private $pre23;
        private $pre24;
        private $pre25;
        private $porjef;
        private $porpar;
        private $poraut;
        private $porsub;
        private $actfor;

        public function getIdfor(){
            return $this->idfor;
        }
        public function getTipfor(){
            return $this->tipfor;
        }
        public function getCodfor(){
            return $this->codfor;
        }
        public function getVerfor(){
            return $this->verfor;
        }
        public function getFecfor(){
            return $this->fecfor;
        }
        public function getNomsec1(){
            return $this->nomsec1;
        }
        public function getPre1(){
            return $this->pre1;
        }
        public function getPre2(){
            return $this->pre2;
        }
        public function getPre3(){
            return $this->pre3;
        }
        public function getPre4(){
            return $this->pre4;
        }
        public function getPre5(){
            return $this->pre5;
        }
        public function getNomsec2(){
            return $this->nomsec2;
        }
        public function getPre6(){
            return $this->pre6;
        }
        public function getPre7(){
            return $this->pre7;
        }
        public function getPre8(){
            return $this->pre8;
        }
        public function getPre9(){
            return $this->pre9;
        }
        public function getPre10(){
            return $this->pre10;
        }
        public function getNomsec3(){
            return $this->nomsec3;
        }
        public function getPre11(){
            return $this->pre11;
        }
        public function getPre12(){
            return $this->pre12;
        }
        public function getPre13(){
            return $this->pre13;
        }
        public function getPre14(){
            return $this->pre14;
        }
        public function getPre15(){
            return $this->pre15;
        }
        public function getNomsec4(){
            return $this->nomsec4;
        }
        public function getPre16() {
            return $this->pre16;
        }
        public function getPre17() {
            return $this->pre17;
        }
        public function getPre18() {
            return $this->pre18;
        }
        public function getPre19() {
            return $this->pre19;
        }
        public function getPre20() {
            return $this->pre20;
        }
        public function getNomsec5(){
            return $this->nomsec5;
        }
        public function getPre21() {
            return $this->pre21;
        }
        public function getPre22() {
            return $this->pre22;
        }
        public function getPre23() {
            return $this->pre23;
        }
        public function getPre24() {
            return $this->pre24;
        }
        public function getPre25() {
            return $this->pre25;
        }
        public function getPorjef(){
            return $this->porjef;
        }
        public function getPorpar(){
            return $this->porpar;
        }
        public function getPoraut(){
            return $this->poraut;
        }
        public function getPorsub(){
            return $this->porsub;
        }
        public function getActfor(){
            return $this->actfor;
        }
       
        public function setIdfor($idfor){
            $this->idfor = $idfor;
        }
        public function setTipfor($tipfor){
            $this->tipfor = $tipfor;
        }
        public function setCodfor($codfor){
            $this->codfor = $codfor;
        }
        public function setVerfor($verfor){
            $this->verfor = $verfor;
        }
        public function setFecfor($fecfor){
            $this->fecfor = $fecfor;
        }
        public function setNomsec1($nomsec1){
            $this->nomsec1 = $nomsec1;
        }
        public function setPre1($pre1){
            $this->pre1 = $pre1;
        }
        public function setPre2($pre2){
            $this->pre2 = $pre2;
        }
        public function setPre3($pre3){
            $this->pre3 = $pre3;
        }
        public function setPre4($pre4){
            $this->pre4 = $pre4;
        }
        public function setPre5($pre5){
            $this->pre5 = $pre5;
        }
        public function setNomsec2($nomsec2){
            $this->nomsec2 = $nomsec2;
        }
        public function setPre6($pre6){
            $this->pre6 = $pre6;
        }
        public function setPre7($pre7){
            $this->pre7 = $pre7;
        }
        public function setPre8($pre8){
            $this->pre8 = $pre8;
        }
        public function setPre9($pre9){
            $this->pre9 = $pre9;
        }
        public function setPre10($pre10){
            $this->pre10 = $pre10;
        }
        public function setNomsec3($nomsec3){
            $this->nomsec3 = $nomsec3;
        }
        public function setPre11($pre11){
            $this->pre11 = $pre11;
        }
        public function setPre12($pre12){
            $this->pre12 = $pre12;
        }
        public function setPre13($pre13){
            $this->pre13 = $pre13;
        }
        public function setPre14($pre14){
            $this->pre14 = $pre14;
        }
        public function setPre15($pre15){
            $this->pre15 = $pre15;
        }
        public function setNomsec4($nomsec4){
            $this->nomsec4 = $nomsec4;
        }
        public function setPre16($pre16){
            $this->pre16 = $pre16;
        }
        public function setPre17($pre17){
            $this->pre17 = $pre17;
        }
        public function setPre18($pre18){
            $this->pre18 = $pre18;
        }
        public function setPre19($pre19){
            $this->pre19 = $pre19;
        }
        public function setPre20($pre20){
            $this->pre20 = $pre20;
        }
        public function setNomsec5($nomsec5){
            $this->nomsec5 = $nomsec5;
        }
        public function setPre21($pre21){
            $this->pre21 = $pre21;
        }
        public function setPre22($pre22){
            $this->pre22 = $pre22;
        }
        public function setPre23($pre23){
            $this->pre23 = $pre23;
        }
        public function setPre24($pre24){
            $this->pre24 = $pre24;
        }
        public function setPre25($pre25){
            $this->pre25 = $pre25;
        }
        public function setPorjef($porjef){
            $this->porjef = $porjef;
        }
        public function setPorpar($porpar){
            $this->porpar = $porpar;
        }
        public function setPoraut($poraut){
            $this->poraut = $poraut;
        }
        public function setPorsub($porsub){
            $this->porsub = $porsub;
        }
        public function setActfor($actfor){
            $this->actfor = $actfor;
        }

        function getAll(){
            $sql = "SELECT f.idfor, f.tipfor, f.codfor, f.verfor, f.fecfor, f.nomsec1, f.pre1, f.pre2, f.pre3, f.pre4, f.pre5, f.nomsec2, f.pre6, f.pre7, f.pre8, f.pre9, f.pre10, f.nomsec3, f.pre11, f.pre12, f.pre13, f.pre14, f.pre15, f.nomsec4, f.pre16, f.pre17, f.pre18, f.pre19, f.pre20, f.nomsec5, f.pre21, f.pre22, f.pre23, f.pre24, f.pre25, f.porjef, f.porpar, f.poraut, f.porsub, f.actfor, v.nomval FROM formato AS f INNER JOIN valor AS v ON f.tipfor=v.idval";
            $modelo = new conexion();
            $conexion = $modelo->get_conexion();
            $result = $conexion->prepare($sql);
            $result->execute();
            $res = $result->fetchall(PDO::FETCH_ASSOC);
            return $res;
        }

        function getOne(){
            $sql = "SELECT f.idfor, f.tipfor, f.codfor, f.verfor, f.fecfor, f.nomsec1, f.pre1, f.pre2, f.pre3, f.pre4, f.pre5, f.nomsec2, f.pre6, f.pre7, f.pre8, f.pre9, f.pre10, f.nomsec3, f.pre11, f.pre12, f.pre13, f.pre14, f.pre15, f.nomsec4, f.pre16, f.pre17, f.pre18, f.pre19, f.pre20, f.nomsec5, f.pre21, f.pre22, f.pre23, f.pre24, f.pre25, f.porjef, f.porpar, f.poraut, f.porsub, f.actfor, v.nomval FROM formato AS f INNER JOIN valor AS v ON f.tipfor=v.idval WHERE idfor=:idfor";
            $modelo = new conexion();
            $conexion = $modelo->get_conexion();
            $result = $conexion->prepare($sql);
            $idfor = $this->getIdfor();
            $result->bindParam(":idfor", $idfor);
            $result->execute();
            $res = $result->fetchall(PDO::FETCH_ASSOC);
            return $res;
        }

        function save(){
            try {
                $sql = "INSERT INTO formato (tipfor, codfor, verfor, fecfor, nomsec1, pre1, pre2, pre3, pre4, pre5, nomsec2, pre6, pre7, pre8, pre9, pre10, nomsec3, pre11, pre12, pre13, pre14, pre15, nomsec4, pre16, pre17, pre18, pre19, pre20, nomsec5, pre21, pre22, pre23, pre24, pre25, porjef, porpar, poraut, porsub, actfor) VALUES (:tipfor, :codfor, :verfor, :fecfor, :nomsec1, :pre1, :pre2, :pre3, :pre4, :pre5, :nomsec2, :pre6, :pre7, :pre8, :pre9, :pre10, :nomsec3, :pre11, :pre12, :pre13, :pre14, :pre15, :nomsec4, :pre16, :pre17, :pre18, :pre19, :pre20, :nomsec5, :pre21, :pre22, :pre23, :pre24, :pre25, :porjef, :porpar, :poraut, :porsub, :actfor)";
                $modelo = new conexion();
                $conexion = $modelo->get_conexion();
                $result = $conexion->prepare($sql);
                $tipfor = $this->getTipfor();
                $result->bindParam(":tipfor", $tipfor);
                $codfor = $this->getCodfor();
                $result->bindParam(":codfor", $codfor);
                $verfor = $this->getVerfor();
                $result->bindParam(":verfor", $verfor);
                $fecfor = $this->getFecfor();
                $result->bindParam(":fecfor", $fecfor);
                $nomsec1 = $this->getNomsec1();
                $result->bindParam(":nomsec1", $nomsec1);
                $pre1 = $this->getPre1();
                $result->bindParam(":pre1", $pre1);
                $pre2 = $this->getPre2();
                $result->bindParam(":pre2", $pre2);
                $pre3 = $this->getPre3();
                $result->bindParam(":pre3", $pre3);
                $pre4 = $this->getPre4();
                $result->bindParam(":pre4", $pre4);
                $pre5 = $this->getPre5();
                $result->bindParam(":pre5", $pre5);
                $nomsec2 = $this->getNomsec2();
                $result->bindParam(":nomsec2", $nomsec2);
                $pre6 = $this->getPre6();
                $result->bindParam(":pre6", $pre6);
                $pre7 = $this->getPre7();
                $result->bindParam(":pre7", $pre7);
                $pre8 = $this->getPre8();
                $result->bindParam(":pre8", $pre8);
                $pre9 = $this->getPre9();
                $result->bindParam(":pre9", $pre9);
                $pre10 = $this->getPre10();
                $result->bindParam(":pre10", $pre10);
                $nomsec3 = $this->getNomsec3();
                $result->bindParam(":nomsec3", $nomsec3);
                $pre11 = $this->getPre11();
                $result->bindParam(":pre11", $pre11);
                $pre12 = $this->getPre12();
                $result->bindParam(":pre12", $pre12);
                $pre13 = $this->getPre13();
                $result->bindParam(":pre13", $pre13);
                $pre14 = $this->getPre14();
                $result->bindParam(":pre14", $pre14);
                $pre15 = $this->getPre15();
                $result->bindParam(":pre15", $pre15);
                $nomsec4 = $this->getNomsec4();
                $result->bindParam(":nomsec4", $nomsec4);                
                $pre16 = $this->getPre16();
                $result->bindParam(":pre16", $pre16);
                $pre17 = $this->getPre17();
                $result->bindParam(":pre17", $pre17);
                $pre18 = $this->getPre18();
                $result->bindParam(":pre18", $pre18);
                $pre19 = $this->getPre19();
                $result->bindParam(":pre19", $pre19);
                $pre20 = $this->getPre20();
                $result->bindParam(":pre20", $pre20);
                $nomsec5 = $this->getNomsec5();
                $result->bindParam(":nomsec5", $nomsec5);
                $pre21 = $this->getPre21();
                $result->bindParam(":pre21", $pre21);
                $pre22 = $this->getPre22();
                $result->bindParam(":pre22", $pre22);
                $pre23 = $this->getPre23();
                $result->bindParam(":pre23", $pre23);
                $pre24 = $this->getPre24();
                $result->bindParam(":pre24", $pre24);
                $pre25 = $this->getPre25();
                $result->bindParam(":pre25", $pre25);
                $porjef = $this->getPorjef();
                $result->bindParam(":porjef", $porjef);
                $porpar = $this->getPorpar();
                $result->bindParam(":porpar", $porpar);
                $poraut = $this->getPoraut();
                $result->bindParam(":poraut", $poraut); 
                $porsub = $this->getPorsub();
                $result->bindParam(":porsub", $porsub);  
                $actfor = $this->getActfor();
                $result->bindParam(":actfor", $actfor);  
                $result->execute();
            } catch (Exception $e) {
                ManejoError($e);
            }
        }

        function edit(){
            try {
                $sql = "UPDATE formato SET tipfor=:tipfor, codfor=:codfor, verfor=:verfor, fecfor=:fecfor, nomsec1=:nomsec1, pre1=:pre1, pre2=:pre2, pre3=:pre3, pre4=:pre4, pre5=:pre5, nomsec2=:nomsec2, pre6=:pre6, pre7=:pre7, pre8=:pre8, pre9=:pre9, pre10=:pre10, nomsec3=:nomsec3, pre11=:pre11, pre12=:pre12, pre13=:pre13, pre14=:pre14, pre15=:pre15, nomsec4=:nomsec4, pre16=:pre16, pre17=:pre17, pre18=:pre18, pre19=:pre19, pre20=:pre20, nomsec5=:nomsec5, pre21=:pre21, pre22=:pre22, pre23=:pre23, pre24=:pre24, pre25=:pre25, porjef=:porjef, porpar=:porpar, poraut=:poraut, porsub=:porsub, actfor=:actfor WHERE idfor=:idfor";
                $modelo = new conexion();
                $conexion = $modelo->get_conexion();
                $result = $conexion->prepare($sql);
                $idfor = $this->getIdfor();
                $result->bindParam(":idfor", $idfor);
                $tipfor = $this->getTipfor();
                $result->bindParam(":tipfor", $tipfor);
                $codfor = $this->getCodfor();
                $result->bindParam(":codfor", $codfor);
                $verfor = $this->getVerfor();
                $result->bindParam(":verfor", $verfor);
                $fecfor = $this->getFecfor();
                $result->bindParam(":fecfor", $fecfor);
                $nomsec1 = $this->getNomsec1();
                $result->bindParam(":nomsec1", $nomsec1);
                $pre1 = $this->getPre1();
                $result->bindParam(":pre1", $pre1);
                $pre2 = $this->getPre2();
                $result->bindParam(":pre2", $pre2);
                $pre3 = $this->getPre3();
                $result->bindParam(":pre3", $pre3);
                $pre4 = $this->getPre4();
                $result->bindParam(":pre4", $pre4);
                $pre5 = $this->getPre5();
                $result->bindParam(":pre5", $pre5);
                $nomsec2 = $this->getNomsec2();
                $result->bindParam(":nomsec2", $nomsec2);
                $pre6 = $this->getPre6();
                $result->bindParam(":pre6", $pre6);
                $pre7 = $this->getPre7();
                $result->bindParam(":pre7", $pre7);
                $pre8 = $this->getPre8();
                $result->bindParam(":pre8", $pre8);
                $pre9 = $this->getPre9();
                $result->bindParam(":pre9", $pre9);
                $pre10 = $this->getPre10();
                $result->bindParam(":pre10", $pre10);
                $nomsec3 = $this->getNomsec3();
                $result->bindParam(":nomsec3", $nomsec3);
                $pre11 = $this->getPre11();
                $result->bindParam(":pre11", $pre11);
                $pre12 = $this->getPre12();
                $result->bindParam(":pre12", $pre12);
                $pre13 = $this->getPre13();
                $result->bindParam(":pre13", $pre13);
                $pre14 = $this->getPre14();
                $result->bindParam(":pre14", $pre14);
                $pre15 = $this->getPre15();
                $result->bindParam(":pre15", $pre15);
                $nomsec4 = $this->getNomsec4();
                $result->bindParam(":nomsec4", $nomsec4);                
                $pre16 = $this->getPre16();
                $result->bindParam(":pre16", $pre16);
                $pre17 = $this->getPre17();
                $result->bindParam(":pre17", $pre17);
                $pre18 = $this->getPre18();
                $result->bindParam(":pre18", $pre18);
                $pre19 = $this->getPre19();
                $result->bindParam(":pre19", $pre19);
                $pre20 = $this->getPre20();
                $result->bindParam(":pre20", $pre20);
                $nomsec5 = $this->getNomsec5();
                $result->bindParam(":nomsec5", $nomsec5);
                $pre21 = $this->getPre21();
                $result->bindParam(":pre21", $pre21);
                $pre22 = $this->getPre22();
                $result->bindParam(":pre22", $pre22);
                $pre23 = $this->getPre23();
                $result->bindParam(":pre23", $pre23);
                $pre24 = $this->getPre24();
                $result->bindParam(":pre24", $pre24);
                $pre25 = $this->getPre25();
                $result->bindParam(":pre25", $pre25);
                $porjef = $this->getPorjef();
                $result->bindParam(":porjef", $porjef);
                $porpar = $this->getPorpar();
                $result->bindParam(":porpar", $porpar);
                $poraut = $this->getPoraut();
                $result->bindParam(":poraut", $poraut); 
                $porsub = $this->getPorsub();
                $result->bindParam(":porsub", $porsub);  
                $actfor = $this->getActfor();
                $result->bindParam(":actfor", $actfor);   
                $result->execute();
            } catch (Exception $e) {
                ManejoError($e);
            }
        }

        function editAct(){
            try{
                $sql = "UPDATE formato SET actfor=:actfor WHERE idfor=:idfor";
                $modelo = new conexion();
                $conexion = $modelo->get_conexion();
                $result = $conexion->prepare($sql);
                $idfor = $this->getIdfor();
                $result->bindParam(":idfor",$idfor);
                $actfor = $this->getActfor();
                $result->bindParam(":actfor", $actfor);
                $result->execute();
            }catch(Exception $e){
                ManejoError($e);
            }
        }

        function del(){
            try{
                $sql = "DELETE FROM formato WHERE idfor=:idfor";
                $modelo = new conexion();
                $conexion = $modelo->get_conexion();
                $result = $conexion->prepare($sql);
                $idfor = $this->getIdfor();
                $result->bindParam(":idfor",$idfor);
                $result->execute();
            }catch(Exception $e){
                ManejoError($e);
            }
        }

        function selectFor($tipfor, $actfor, $codfor){
            $sql = "SELECT idfor, tipfor, codfor, actfor FROM formato WHERE tipfor=:tipfor AND actfor=:actfor AND codfor!=:codfor";
            $modelo = new conexion();
            $conexion = $modelo->get_conexion();
            $result = $conexion->prepare($sql);
            $result->bindParam(":tipfor", $tipfor);
            $result->bindParam(":actfor", $actfor);
            $result->bindParam(":codfor", $codfor);
            $result->execute();
            $res = $result->fetchall(PDO::FETCH_ASSOC);
            return $res;
        }

        function getAllDom($iddom){
            $sql = "SELECT idval, nomval FROM valor WHERE iddom=:iddom";
            $modelo = new conexion();
            $conexion = $modelo->get_conexion();
            $result = $conexion->prepare($sql);
            $result->bindParam(":iddom", $iddom);
            $result->execute();
            $res = $result->fetchall(PDO::FETCH_ASSOC);
            return $res;
        }

        function getFxP($idfor){
            $sql ="SELECT COUNT(idfor) AS can FROM evaluacion WHERE idfor=:idfor";
            $modelo =new conexion();
            $conexion = $modelo->get_conexion();
            $result = $conexion->prepare($sql);
            $result->bindParam(":idfor",$idfor);
            $result->execute();
            $res = $result-> fetchall(PDO::FETCH_ASSOC);
            return $res;
        }
    }
?>